(window["webpackJsonpteste-frontend"]=window["webpackJsonpteste-frontend"]||[]).push([[0],{13:function(e,t,n){e.exports=n(24)},18:function(e,t,n){},19:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(6),i=n.n(r),s=(n(18),n(19),n(1)),l=n(2),c=n(4),u=n(3),p=n(5),m=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("header",{className:"app-header"},o.a.createElement("img",{src:"./logo.png",className:"app-logo",alt:"Logotipo"}))}}]),t}(o.a.Component),f=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"loading-box"+(this.props.ready?" loading--done":"")},o.a.createElement("h1",null,"Aguarde, estamos carregando as plataformas"),o.a.createElement("div",{className:"loading-box__dots"},o.a.createElement("span",null,"."),o.a.createElement("span",null,"."),o.a.createElement("span",null,".")))}}]),t}(o.a.Component),d=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={currentPlatform:null},n.transitioning=!1,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"signalPlatform",value:function(e){this.state.currentPlatform===e||this.transitioning||(this.startTransition(),this.setState({currentPlatform:e}),this.props.platformClicked(e))}},{key:"startTransition",value:function(){var e=this;document.querySelector(".platform-options")&&(document.querySelector(".platform-navbar").classList.add("platform--active"),this.transitioning=!0,setTimeout(function(){document.querySelector(".platform-navbar").classList.remove("platform--active"),e.transitioning=!1},500))}},{key:"render",value:function(){var e=this,t=[];return this.props.platforms.forEach(function(n){t.push(o.a.createElement("div",{className:"platform-navbar__button"+(n===e.state.currentPlatform?" platform--active":""),key:n.sku,onClick:function(){e.signalPlatform(n)}},n.nome))}),o.a.createElement("nav",{className:"platform-navbar"},t)}}]),t}(o.a.Component),h=n(26),v=n(11);var O=function(e){var t="translateX(calc((100% + "+(window.innerWidth<=320?"20px":"40px")+") * ",n=document.querySelector(".platform-options__swipe-left"),a=document.querySelector(".platform-options__swipe-right"),o=Array.from(document.querySelectorAll(".platform-options .option")),r=0,i=document.querySelector(".platform-options .option.option-selected");i&&(r=o.indexOf(i),i.classList.remove("option-selected")),r+="right"===e?1:-1,[[a,o.length-1],[n,0]].forEach(function(e){var t=Object(v.a)(e,2),n=t[0],a=t[1];r===a?n.classList.add("swipe--hidden"):n.classList.remove("swipe--hidden")}),o.forEach(function(e,n){n===r&&e.classList.add("option-selected"),e.style.transform=t+(-1*r).toString()+"))"})};var b=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"platform-options__swipe-buttons"},o.a.createElement("div",{className:"platform-options__swipe-left swipe--hidden",onClick:function(){O("left")}},"\u2039"),o.a.createElement("div",{className:"platform-options__swipe-right"+(this.props.optionAmount<=1?" swipe--hidden":""),onClick:function(){O("right")}},"\u203a"))}}]),t}(o.a.Component),E=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"signalOption",value:function(){this.props.optionClicked(this.props.option)}},{key:"render",value:function(){var e=this;return this.props.doneOptions.includes(this.props.option)?o.a.createElement("button",{className:"option__button option--done"},o.a.createElement("div",null,"Plano contratado com sucesso!")):o.a.createElement("button",{className:"option__button",onClick:function(){e.signalOption()}},o.a.createElement("div",null,"Quero esse plano!"))}}]),t}(o.a.Component),y=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).hiddenItems=["sku","ativo"],n.transferOptionSignal=function(e){n.props.optionClicked(e)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"evalOptionItem",value:function(e){if("object"==typeof e){var t=[];return Object.getOwnPropertyNames(e).forEach(function(n){"valorParcela"===n&&!1===e[n]||t.push(o.a.createElement("li",{key:n},o.a.createElement("span",{className:"subitem__name"},n,":"),o.a.createElement("span",{className:"subitem__value"}," "+e[n].toString())))}),o.a.createElement("ul",null,t)}return console.log("ERROR: evaluated unknown item ",e),"UNKNOWN ITEM"}},{key:"render",value:function(){var e=this,t=this.props.platform;if(!t)return null;var n=this.props.options.get(t.sku),a=new Map,r=[];n.forEach(function(t){if(!1!==t.ativo){var n=[];Object.getOwnPropertyNames(t).forEach(function(a){e.hiddenItems.includes(a)||n.push(o.a.createElement("div",{className:"option__item",key:a},o.a.createElement("span",{className:"item__name"},a,":"),o.a.createElement("span",{className:"item__value"},"string"==typeof t[a]?" "+t[a].toString():e.evalOptionItem(t[a]))))}),a.set(t.sku,n),r.push(o.a.createElement("div",{className:"option",key:t.sku},o.a.createElement("h2",null,t.sku.split("_")[0]),a.get(t.sku),o.a.createElement(E,{option:t,optionClicked:e.transferOptionSignal,doneOptions:e.props.doneOptions})))}});var i=t.descricao.split("|").map(function(e,t){return o.a.createElement("div",{key:t},e)});return function(){var e=document.querySelector(".platform-options__swipe-right");e&&e.classList.remove("swipe--hidden");var t=document.querySelector(".platform-options__swipe-left");t&&t.classList.add("swipe--hidden")}(),o.a.createElement(h.a,{in:!0,appear:!0,timeout:100,classNames:"platform-options-transition"},o.a.createElement("section",{className:"platform-options"},o.a.createElement("h1",null,i),o.a.createElement("div",{className:"platform-options__container"},r),o.a.createElement(b,{optionAmount:r.length})))}}]),t}(o.a.Component),g=[{name:"Nome:",type:"text"},{name:"Email:",type:"email",validValue:/.+@.+\../},{name:"Data de nascimento:",type:"date"},{name:"CPF:",type:"text",maxSize:"11",validChars:/[0-9]/,validValue:/[0-9]{11}/},{name:"Telefone:",type:"text",maxSize:"11",validChars:/[0-9]/,validValue:/[0-9]{8,}/}];var _=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"closeForm",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?(setTimeout(function(){document.querySelector(".option__form").classList.add("fade-out"),setTimeout(function(){e.props.formClosed(null,"success")},350)},1600),console.log("--------","\n\n","Plano contratado!","\n\n","Dados da plataforma:",this.props.platform,"\n\n","Dados do plano:",this.props.option,"\n\n","Dados do usu\xe1rio:",t,"\n\n","--------")):(document.querySelector(".option__form").classList.add("fade-out"),setTimeout(function(){e.props.formClosed(null)},350))}},{key:"render",value:function(){var e=this,t=this.props.option;if(!t)return null;var n=[];return g.forEach(function(e,t){n.push(o.a.createElement("div",{className:"form__field",key:t},o.a.createElement("div",null,e.name),o.a.createElement("input",{type:e.type,onInput:function(t){!function(e,t){var n=e.target,a=n.value;t.validChars&&a.length>0&&!a[a.length-1].match(t.validChars)?n.value=a.slice(0,-1):t.maxSize&&a.length>t.maxSize&&(n.value=a.slice(0,-1))}(t,e)}})))}),o.a.createElement("div",{className:"option__form"},o.a.createElement("div",{className:"option__form-box"},o.a.createElement("h2",null,"Assinar o plano ",t.sku.split("_")[0]),o.a.createElement("h3",null,"Preencha os dados abaixo para prosseguir:"),n,o.a.createElement("div",{className:"form__buttons"},o.a.createElement("div",{className:"form__button-close",onClick:function(){e.closeForm()}},"Retornar"),o.a.createElement("div",{className:"form__button-submit",onClick:function(){var t=function(){var e=[],t=[];if(document.querySelectorAll(".form__field input").forEach(function(n,a){n.classList.remove("valid"),n.classList.remove("invalid");var o=n.previousElementSibling.textContent.trim();":"===o[o.length-1]&&(o=o.slice(0,-1)),t.push({}),t[a][o]=n.value,""===t[a][o].trim()||g[a].validValue&&!t[a][o].match(g[a].validValue)?e.push(n):n.classList.add("valid")}),e.length)return e.forEach(function(e){e.classList.add("invalid")}),!1;var n=document.querySelector(".option__form-box");n.classList.add("form--success"),setTimeout(function(){n.classList.add("success-fade"),setTimeout(function(){n.classList.remove("form--success"),n.classList.remove("success-fade")},400)},1200);var a={};return Object.assign.apply(Object,[a].concat(t)),a}();t&&e.closeForm(t)}},"Enviar dados"))))}}]),t}(o.a.Component),j=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("footer",{className:"app-footer"})}}]),t}(o.a.Component),k=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={platformsReady:!1,platforms:null,currentPlatform:null,currentOption:null},n.allOptions=new Map,n.doneOptions=[],n.renderPlatformOptions=function(e){n.setState({currentPlatform:e})},n.renderOptionForm=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&n.doneOptions.push(n.state.currentOption),n.setState({currentOption:e})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"getPlatforms",value:function(){var e=this;window.fetch("http://private-59658d-celulardireto2017.apiary-mock.com/plataformas",{method:"GET"}).then(function(e){return e.json()}).then(function(t){e.setState({platformsReady:!0}),setTimeout(function(){e.setState({platforms:t.plataformas})},300),e.getOptions(t.plataformas)})}},{key:"getOptions",value:function(e){var t=this;e.forEach(function(e){window.fetch("http://private-59658d-celulardireto2017.apiary-mock.com/planos/"+e.sku,{method:"GET"}).then(function(e){return e.json()}).then(function(n){t.allOptions.set(e.sku,n.planos)})})}},{key:"componentDidMount",value:function(){this.getPlatforms()}},{key:"render",value:function(){return this.state.platforms?o.a.createElement("div",{className:"app"},o.a.createElement(m,null),o.a.createElement(d,{platforms:this.state.platforms,platformClicked:this.renderPlatformOptions}),o.a.createElement(y,{options:this.allOptions,platform:this.state.currentPlatform,optionClicked:this.renderOptionForm,doneOptions:this.doneOptions}),o.a.createElement(_,{option:this.state.currentOption,platform:this.state.currentPlatform,formClosed:this.renderOptionForm}),o.a.createElement(j,null)):o.a.createElement("div",{className:"app"},o.a.createElement(m,null),o.a.createElement(f,{ready:this.state.platformsReady}),o.a.createElement(j,null))}}]),t}(o.a.Component);var w=function(){return o.a.createElement(k,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,1,2]]]);
//# sourceMappingURL=main.29d59d20.chunk.js.map